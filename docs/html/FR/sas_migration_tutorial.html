
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tutoriel &#8212; Banff 3.01.002 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=2a807888" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=d4abd058"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'FR/sas_migration_tutorial';</script>
    <link rel="index" title="Index" href="../genindex" />
    <link rel="search" title="Search" href="../search" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/banff_white.png" class="logo__image only-light" alt="Banff 3.01.002 documentation - Home"/>
    <img src="../_static/banff_white.png" class="logo__image only-dark pst-js-only" alt="Banff 3.01.002 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../EN/index">
    English
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="index">
    Français
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/StatCan/gensol-banff" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../EN/index">
    English
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="index">
    Français
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/StatCan/gensol-banff" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Tutoriel</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="tutoriel">
<h1>Tutoriel<a class="headerlink" href="#tutoriel" title="Link to this heading">#</a></h1>
<p>Ce tutoriel montrera l’équivalent Python (<code class="docutils literal notranslate"><span class="pre">/Python/sample_programs/conversion_examples/Errorloc01.py</span></code>) du programme d’exemple 1 en langage SAS Proc Errorloc (<code class="docutils literal notranslate"><span class="pre">/Python/sample_programs/conversion_examples/Errorloc01.sas</span></code>).
De nombreux équivalents SAS et Python sont également disponibles dans le dossier <code class="docutils literal notranslate"><span class="pre">/Python/sample_programs/conversion_examples/</span></code>.</p>
<p>L’exemple de programme illustre comment</p>
<ul class="simple">
<li><p>créer un tableau synthétique</p></li>
<li><p>trier le tableau</p></li>
<li><p>spécifier</p>
<ul>
<li><p>paramètres</p></li>
<li><p>tableau d’entrée</p></li>
<li><p>options du tableau de sortie</p></li>
</ul>
</li>
<li><p>accéder aux résultats</p></li>
</ul>
<p>Il abordera également certaines différences pertinentes entre SAS et Python.</p>
<section id="exemple-de-langage-sas">
<h2>Exemple de langage SAS<a class="headerlink" href="#exemple-de-langage-sas" title="Link to this heading">#</a></h2>
<div class="highlight-sas notranslate"><div class="highlight"><pre><span></span><span class="c">/* créer une table d&#39;entrée synthétique */</span>
<span class="kr">data </span>example_indata;
<span class="k">input</span> IDENT $ X1 X2 ZONE $<span class="m">1</span>.;
<span class="k">cards;</span>
<span class="x">R03 10 40 B</span>
<span class="x">R02 -4 49 A</span>
<span class="x">R04 4 49 A</span>
<span class="x">R01 16 49 A</span>
<span class="x">R05 15 51 B</span>
<span class="x">R07 -4 29 B</span>
<span class="x">R06 30 70 B</span>
<span class="x">;</span>
<span class="x">run;</span>

<span class="x">/* trier par variables BY et KEY */</span>
<span class="x">proc sort data=example_indata; by ZONE IDENT;run;</span>

<span class="x">/* exécuter la procédure Banff */</span>
<span class="x">proc errorloc</span>
<span class="x">data=example_indata</span>
<span class="x">outstatus=outstatus</span>
<span class="x">outreject=outreject</span>
<span class="x">edits=&quot;x1&gt;=-5; x1&lt;=15; x2&gt;=30; x1+x2&lt;=50;&quot;</span>
<span class="x">weights=&quot;x1=1.5;&quot;</span>
<span class="x">cardinality=2</span>
<span class="x">timeperobs=.1</span>
<span class="x">;</span>
id IDENT;
<span class="k">by</span> ZONE;

<span class="c">/* exécuter l&#39;appel Banff */</span>
<span class="kr">run;</span> 
</pre></div>
</div>
</section>
<section id="equivalent-du-langage-python">
<h2>Équivalent du langage Python<a class="headerlink" href="#equivalent-du-langage-python" title="Link to this heading">#</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># importer le paquet Banff</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">banff</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>

<span class="c1"># créer un schéma pour la table indata</span>
<span class="n">indata_schema</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">schema</span><span class="p">([</span>
            <span class="p">(</span><span class="s2">&quot;IDENT&quot;</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
            <span class="p">(</span><span class="s2">&quot;X1&quot;</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int64</span><span class="p">()),</span>
            <span class="p">(</span><span class="s2">&quot;X2&quot;</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int64</span><span class="p">()),</span>
            <span class="p">(</span><span class="s2">&quot;ZONE&quot;</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
    <span class="p">])</span>

<span class="c1"># créer une table en utilisant un schéma et des listes de valeurs pour chaque colonne</span>
<span class="n">indata</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">(</span>
    <span class="n">schema</span><span class="o">=</span><span class="n">indata_schema</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;R03&quot;</span><span class="p">,</span> <span class="s2">&quot;R02&quot;</span><span class="p">,</span> <span class="s2">&quot;R04&quot;</span><span class="p">,</span> <span class="s2">&quot;R01&quot;</span><span class="p">,</span> <span class="s2">&quot;R05&quot;</span><span class="p">,</span> <span class="s2">&quot;R07&quot;</span><span class="p">,</span> <span class="s2">&quot;R06&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">70</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">],</span>
    <span class="p">],</span>
<span class="p">)</span>

<span class="c1"># trier selon la variable `by` et `unit_id`</span>
<span class="n">indata</span> <span class="o">=</span> <span class="n">indata</span><span class="o">.</span><span class="n">sort_by</span><span class="p">([</span>
    <span class="p">(</span><span class="s2">&quot;ZONE&quot;</span><span class="p">,</span> <span class="s2">&quot;ascending&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;IDENT&quot;</span><span class="p">,</span> <span class="s2">&quot;ascending&quot;</span><span class="p">),</span>
<span class="p">])</span>

<span class="c1"># exécuter la procédure Banff</span>
<span class="n">banff_call</span> <span class="o">=</span> <span class="n">banff</span><span class="o">.</span><span class="n">errorloc</span><span class="p">(</span>
    <span class="n">indata</span><span class="o">=</span><span class="n">indata</span><span class="p">,</span>
    <span class="n">edits</span><span class="o">=</span><span class="s2">&quot;x1&gt;=-5; x1&lt;=15; x2&gt;=30; x1+x2&lt;=50;&quot;</span><span class="p">,</span>
    <span class="n">weights</span><span class="o">=</span><span class="s2">&quot;x1=1.5;&quot;</span><span class="p">,</span>
    <span class="n">cardinality</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">time_per_obs</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">unit_id</span><span class="o">=</span><span class="s2">&quot;IDENT&quot;</span><span class="p">,</span>
    <span class="n">by</span><span class="o">=</span><span class="s2">&quot;ZONE&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="explication-ligne-par-ligne">
<h2>Explication ligne par ligne<a class="headerlink" href="#explication-ligne-par-ligne" title="Link to this heading">#</a></h2>
<section id="paquets-d-importation">
<h3>Paquets d’importation<a class="headerlink" href="#paquets-d-importation" title="Link to this heading">#</a></h3>
<p>En Python, les <em>paquets</em> doivent être <em>importés</em> dans une session avant de pouvoir être utilisés.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">banff</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>
</pre></div>
</div>
<p>Le paquet <a class="reference external" href="https://pypi.org/project/pyarrow/"><code class="docutils literal notranslate"><span class="pre">pyarrow</span></code></a> est utilisé pour créer et manipuler des tableaux. Notez que le pseudonyme <code class="docutils literal notranslate"><span class="pre">pa</span></code> est utilisé pour le paquet <code class="docutils literal notranslate"><span class="pre">pyarrow</span></code>.</p>
</section>
<section id="creer-des-donnees-synthetiques">
<h3>Créer des données synthétiques<a class="headerlink" href="#creer-des-donnees-synthetiques" title="Link to this heading">#</a></h3>
<p>Nous créons la même table synthétique que celle créée dans SAS.</p>
<p>Un objet <em>Pyarrow Schema</em> est créé et attribué à la variable <code class="docutils literal notranslate"><span class="pre">indata_schema</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># créer un schéma pour la table indata</span>
<span class="n">indata_schema</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">schema</span><span class="p">([</span>
            <span class="p">(</span><span class="s2">&quot;IDENT&quot;</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
            <span class="p">(</span><span class="s2">&quot;X1&quot;</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int64</span><span class="p">()),</span>
            <span class="p">(</span><span class="s2">&quot;X2&quot;</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">int64</span><span class="p">()),</span>
            <span class="p">(</span><span class="s2">&quot;ZONE&quot;</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
    <span class="p">])</span>
</pre></div>
</div>
<ul class="simple">
<li><p>ceci est utilisé pour définir le nom et le type de données de chaque colonne d’une table</p></li>
<li><p>Pyarrow propose un <a class="reference external" href="https://arrow.apache.org/docs/python/api/datatypes.html#factory-functions">ensemble complet de types de données</a></p></li>
<li><p>pour plus de détails, voir la <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.schema.html">documentation <code class="docutils literal notranslate"><span class="pre">pyarrow.schema</span></code></a></p></li>
</ul>
<p>Un objet <em>Pyarrow Table</em> est créé et stocké dans la variable <code class="docutils literal notranslate"><span class="pre">indata</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># créer une table en utilisant un schéma et des listes de valeurs pour chaque colonne</span>
<span class="n">indata</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">table</span><span class="p">(</span>
    <span class="n">schema</span><span class="o">=</span><span class="n">indata_schema</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="p">[</span>
        <span class="p">[</span><span class="s2">&quot;R03&quot;</span><span class="p">,</span> <span class="s2">&quot;R02&quot;</span><span class="p">,</span> <span class="s2">&quot;R04&quot;</span><span class="p">,</span> <span class="s2">&quot;R01&quot;</span><span class="p">,</span> <span class="s2">&quot;R05&quot;</span><span class="p">,</span> <span class="s2">&quot;R07&quot;</span><span class="p">,</span> <span class="s2">&quot;R06&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">70</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">],</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>l’ordre des colonnes dans le schéma correspond à l’ordre des listes de données</p></li>
<li><p>pour plus de détails, voir la <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.table.html">documentation <code class="docutils literal notranslate"><span class="pre">pyarrow.table</span></code></a></p></li>
<li><p>contrairement à SAS, où les tables sont généralement stockées sous forme de fichiers, les tables Pyarrow sont généralement stockées en mémoire sous forme d’<em>objets</em>, d’où la nécessité d’assigner à la variable <code class="docutils literal notranslate"><span class="pre">indata</span></code></p></li>
</ul>
<p>La table <code class="docutils literal notranslate"><span class="pre">indata</span></code> est triée à l’aide de sa <em>méthode</em> <code class="docutils literal notranslate"><span class="pre">sort_by()</span></code> et réassignée à elle-même.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># trier selon la variable `by` et `unit_id`</span>
<span class="n">indata</span> <span class="o">=</span> <span class="n">indata</span><span class="o">.</span><span class="n">sort_by</span><span class="p">([</span>
    <span class="p">(</span><span class="s2">&quot;ZONE&quot;</span><span class="p">,</span> <span class="s2">&quot;ascending&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;IDENT&quot;</span><span class="p">,</span> <span class="s2">&quot;ascending&quot;</span><span class="p">),</span>
<span class="p">])</span>
</pre></div>
</div>
<ul class="simple">
<li><p>dans SAS, cela serait analogue à l’utilisation de <code class="docutils literal notranslate"><span class="pre">proc</span> <span class="pre">sort</span> <span class="pre">data=indata</span></code> sans explicitement l’option <code class="docutils literal notranslate"><span class="pre">out</span></code></p></li>
<li><p>la plupart des opérations dans pyarrow renvoient une sorte de copie de la table, ce qui signifie que la table source n’est pas modifiée</p></li>
<li><p>pour conserver la table non triée, affectez simplement la table triée à une variable différente</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">indata_sorted</span> <span class="pre">=</span> <span class="pre">indata.sort_by(...</span></code> vous donnerez une nouvelle copie qui est triée et laissera la copie <code class="docutils literal notranslate"><span class="pre">indata</span></code> d’origine telle quelle</p></li>
</ul>
<section id="concepts-python">
<h4>Concepts Python<a class="headerlink" href="#concepts-python" title="Link to this heading">#</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>en Python, les variables sont souvent des <em>objets</em>, contenant non seulement des données mais aussi des <em>méthodes</em></p></li>
<li><p>les méthodes sont souvent utiles pour obtenir des informations sur les données ou effectuer des opérations sur celles-ci</p></li>
<li><p>la variable <code class="docutils literal notranslate"><span class="pre">indata</span></code> est un objet <em>Pyarrow Table</em> (<code class="docutils literal notranslate"><span class="pre">pyarrow.Table</span></code>) et possède donc sa propre <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table.sort_by">méthode <code class="docutils literal notranslate"><span class="pre">sort_by()</span></code></a></p></li>
<li><p>la documentation sur les autres méthodes disponibles pour Pyarrow Tables est disponible <a class="reference external" href="https://arrow.apache.org/docs/python/generated/pyarrow.Table.html#pyarrow.Table">ici</a>.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="execution-de-la-procedure-banff">
<h3>Exécution de la procédure Banff<a class="headerlink" href="#execution-de-la-procedure-banff" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">banff_call</span> <span class="o">=</span> <span class="n">banff</span><span class="o">.</span><span class="n">errorloc</span><span class="p">(</span>
    <span class="n">indata</span><span class="o">=</span><span class="n">indata</span><span class="p">,</span>
    <span class="n">edits</span><span class="o">=</span><span class="s2">&quot;x1&gt;=-5; x1&lt;=15; x2&gt;=30; x1+x2&lt;=50;&quot;</span><span class="p">,</span>
    <span class="n">weights</span><span class="o">=</span><span class="s2">&quot;x1=1.5;&quot;</span><span class="p">,</span>
    <span class="n">cardinality</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">time_per_obs</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">unit_id</span><span class="o">=</span><span class="s2">&quot;IDENT&quot;</span><span class="p">,</span>
    <span class="n">by</span><span class="o">=</span><span class="s2">&quot;ZONE&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>L’appel de <code class="docutils literal notranslate"><span class="pre">banff.errorloc()</span></code> entraîne l’exécution de la procédure errorloc et l’affectation d’un objet à la variable <code class="docutils literal notranslate"><span class="pre">banff_call</span></code>. L’objet peut être utilisé pour accéder aux tables de sortie.</p>
<ul class="simple">
<li><p>notez que tous les paramètres et tables sont spécifiés sous forme de paires clé-valeur séparées par des virgules</p></li>
<li><p>ils peuvent apparaître dans n’importe quel ordre</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">indata=indata</span></code> spécifie que la table <code class="docutils literal notranslate"><span class="pre">indata</span></code> (récemment triée) doit être fournie comme table « indata »</p></li>
</ul>
</section>
<section id="execution-de-la-procedure">
<h3>Exécution de la procédure<a class="headerlink" href="#execution-de-la-procedure" title="Link to this heading">#</a></h3>
<p>Pendant l’exécution de la procédure, le texte écrit sur la console par la procédure doit être quasiment identique au journal SAS de l’exemple équivalent.</p>
</section>
<section id="acces-aux-tables-de-sortie">
<h3>Accès aux tables de sortie<a class="headerlink" href="#acces-aux-tables-de-sortie" title="Link to this heading">#</a></h3>
<p>Une fois l’exécution terminée, les options de la table de sortie sont traitées. L’option par défaut a été spécifiée ci-dessus, de sorte que les tables de sortie sont disponibles sous forme de tables pyarrow.</p>
<p>Elles sont stockées dans l’objet <code class="docutils literal notranslate"><span class="pre">banff_call</span></code>, accédez-y en utilisant <code class="docutils literal notranslate"><span class="pre">banff_call.outstatus</span></code> et <code class="docutils literal notranslate"><span class="pre">banff_call.outreject</span></code>. À partir de là, elles peuvent être traitées par les utilisateurs comme n’importe quelle autre table pyarrow, par exemple:</p>
<ul class="simple">
<li><p>écrit dans un fichier</p></li>
<li><p>manipulé (trié, fusionné, etc.)</p></li>
<li><p>utilisé comme entrée pour une autre procédure (<code class="docutils literal notranslate"><span class="pre">instatus=banff_call.outstatus</span></code>)</p></li>
</ul>
</section>
<section id="autres-options-d-entree-et-de-sortie">
<h3>Autres options d’entrée et de sortie<a class="headerlink" href="#autres-options-d-entree-et-de-sortie" title="Link to this heading">#</a></h3>
<p>Pour fournir un moyen cohérent de lecture/écriture de fichiers et de conversion entre les formats de tableau, tout en conservant la plus haute précision possible en virgule flottante, la prise en charge de divers formats de tableau d’entrée et de sortie a été implémentée. Pour plus de détails, consultez le <a class="reference internal" href="user_guide#supported-formats"><span class="std std-ref">Guide de l’utilisateur</span></a>.</p>
<p>Le code suivant illustre l’utilisation de fichiers pour les tableaux d’entrée et de sortie en modifiant l’exemple ci-dessus.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">banff</span><span class="o">.</span><span class="n">errorloc</span><span class="p">(</span> 
    <span class="n">indata</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\temp\in_data.feather&quot;</span><span class="p">,</span>
    <span class="n">outstatus</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\temp\out_status.parquet&quot;</span><span class="p">,</span>
    <span class="n">outreject</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\temp\out_reject.parquet&quot;</span><span class="p">,</span>
    <span class="n">edits</span><span class="o">=</span><span class="s2">&quot;x1&gt;=-5; x1&lt;=15; x2&gt;=30; x1+x2&lt;=50;&quot;</span><span class="p">,</span>
    <span class="n">weights</span><span class="o">=</span><span class="s2">&quot;x1=1.5;&quot;</span><span class="p">,</span>
    <span class="n">cardinality</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">time_per_obs</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">unit_id</span><span class="o">=</span><span class="s2">&quot;IDENT&quot;</span><span class="p">,</span>
    <span class="n">by</span><span class="o">=</span><span class="s2">&quot;ZONE&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>notez qu’il n’est pas nécessaire d’affecter l’objet renvoyé par <code class="docutils literal notranslate"><span class="pre">banff.errorloc()</span></code> à une variable car les données de sortie sont écrites sur le disque.</p></li>
</ul>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exemple-de-langage-sas">Exemple de langage SAS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#equivalent-du-langage-python">Équivalent du langage Python</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#explication-ligne-par-ligne">Explication ligne par ligne</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paquets-d-importation">Paquets d’importation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creer-des-donnees-synthetiques">Créer des données synthétiques</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#concepts-python">Concepts Python</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#execution-de-la-procedure-banff">Exécution de la procédure Banff</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#execution-de-la-procedure">Exécution de la procédure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#acces-aux-tables-de-sortie">Accès aux tables de sortie</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#autres-options-d-entree-et-de-sortie">Autres options d’entrée et de sortie</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/FR/sas_migration_tutorial.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Statistics Canada / Statistique Canada.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>